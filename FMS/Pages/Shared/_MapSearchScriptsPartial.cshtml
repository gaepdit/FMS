@inject Microsoft.Extensions.Configuration.IConfiguration _configuration
<script src="~/js/map.js" asp-append-version="true"></script>
<script src="https://maps.googleapis.com/maps/api/js?key=@_configuration["GoogleMapSettings:ApiKey"]"></script>
<script>
    let bool = true;   
    $(document).ready(function domReady() {
        $("#Address,#City,#PostalCode").change(function () {
            if ($(this).val() !== "") {
                DisableLatLng();
            } else {
                EnableLatLng();
            }
        });

        $("#Latitude,#Latitude").change(function () {
            if ($(this).val() !== "") {
                DisableAddress();
            } else {
                EnableAddress();
            }
        });

        $('#SearchButton').click(function GeoCodeLatLong() {
            const output = $('#Output').val();
            if (output !== "1" && output !== "2" ) {
                return false;
            }

            const lat = $('#Latitude').val();
            const lng = $('#Longitude').val();
            if (lat !== "" && lng !== "") {
                $("#LocalLat").val("");
                $("#LocalLng").val("");
                return true;
            }

            $("#LocalLat").attr("disabled", false);
            $("#LocalLng").attr("disabled", false);
            $("#LocalAddress").attr("disabled", false);

            if (!bool) {
                bool = true;
                return true;
            }
            
            const addr = $('#Address').val();
            const city = $('#City').val();
            const zip = $('#PostalCode').val();

            getLatLongs(addr, city, zip);

            bool = !bool;
            return bool;
        });

        const outputValue = @Html.Raw(Json.Serialize(Model.ShowMap));      
        if (outputValue) {
            const markers = @Html.Raw(Json.Serialize(Model.FacilityList));
          
                let lat = $('#Latitude').val();
                let lng = $('#Longitude').val();
                let Localaddr = $('#LocalAddress').val();
       
                if (lat === "" || lng === "")
                {
                    lat = $('#LocalLat').val();
                    lng = $('#LocalLng').val();
                }
                const radius = $('#Radius').val();

            if (lat !== "" && lat.length > 0) {

                mapInitialize(lat, lng, radius, markers, Localaddr);
            }
        }
        
        function DisableLatLng(){
            $("#Latitude").attr("disabled", true).val("");
            $("#Longitude").attr("disabled", true).val("");
        }
        function EnableLatLng(){
            $("#Latitude").attr("disabled", false);
            $("#Longitude").attr("disabled", false);
        }
        function DisableAddress() {
            $("#Address").attr("disabled", true).val("");
            $("#City").attr("disabled", true).val("");
            $("#PostalCode").attr("disabled", true).val("");
        }
        function EnableAddress() {
            $("#Address").attr("disabled", false);
            $("#City").attr("disabled", false);
            $("#PostalCode").attr("disabled", false);
        }
    });
</script>